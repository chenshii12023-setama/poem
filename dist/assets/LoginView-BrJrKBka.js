import{h as C,u as E,i as f,j as k,c as L,a as l,g as r,t as d,k as t,l as S,b as z,f as u,m as v,e as B,E as V,p as M,o as h}from"./index-KftFhpGg.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./poem-service-BC27KGA3.js";const U={class:"login-container"},F={class:"login-card"},T={class:"login-header"},j={class:"switch-mode"},q=C({__name:"LoginView",setup(A){const y=M(),P=E(),a=f(!0),m=f(!1),p=f(),o=k({email:"",password:"",confirmPassword:""}),x={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{validator:(n,e,s)=>{e===""?s(new Error("请输入密码")):e.length<6?s(new Error("密码长度不能少于6位")):s()},trigger:"blur"}],confirmPassword:[{validator:(n,e,s)=>{e===""?s(new Error("请确认密码")):e!==o.password?s(new Error("两次输入密码不一致")):s()},trigger:"blur"}]},g=()=>{a.value=!a.value,o.email="",o.password="",o.confirmPassword=""},w=async()=>{p.value&&await p.value.validate(n=>{n&&(m.value=!0,setTimeout(()=>{a.value?(P.login({email:o.email,name:o.email.split("@")[0]}),V.success("登录成功"),y.push("/poems")):(V.success("注册成功，请登录"),g()),m.value=!1},1e3))})};return(n,e)=>{const s=u("el-input"),c=u("el-form-item"),_=u("el-button"),b=u("el-form");return h(),L("div",U,[l("div",F,[l("div",T,[l("h2",null,d(a.value?"登录":"注册"),1),e[3]||(e[3]=l("p",null,"欢迎来到诗词应用",-1))]),r(b,{model:o,rules:x,ref_key:"loginForm",ref:p,class:"login-form",onSubmit:B(w,["prevent"])},{default:t(()=>[r(c,{prop:"email"},{default:t(()=>[r(s,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=i=>o.email=i),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),r(c,{prop:"password"},{default:t(()=>[r(s,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=i=>o.password=i),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),a.value?z("",!0):(h(),S(c,{key:0,prop:"confirmPassword"},{default:t(()=>[r(s,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=i=>o.confirmPassword=i),type:"password",placeholder:"请确认密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1})),r(_,{type:"primary",size:"large",loading:m.value,onClick:w,class:"login-button"},{default:t(()=>[v(d(a.value?"登录":"注册"),1)]),_:1},8,["loading"])]),_:1},8,["model"]),l("div",j,[l("span",null,d(a.value?"还没有账号？":"已有账号？"),1),r(_,{type:"text",onClick:g},{default:t(()=>[v(d(a.value?"立即注册":"立即登录"),1)]),_:1})])])])}}}),J=N(q,[["__scopeId","data-v-2b736b8d"]]);export{J as default};
