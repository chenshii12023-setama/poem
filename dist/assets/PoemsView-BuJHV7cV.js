import{d as U,u as j,r as u,c as q,o as Q,a as b,b as n,e as A,f as e,w as o,g as a,F as G,h as H,i as v,j as f,k as J,t as _,n as K,E as V,_ as O}from"./index-kGyOg6cZ.js";const R={class:"poems"},W={class:"search-section"},X={class:"poems-list"},Y={class:"poem-header"},Z={class:"poem-meta"},ee={class:"poem-content"},te={class:"poem-actions"},oe={key:0,class:"load-more"},le=U({__name:"PoemsView",setup(se){const m=j(),d=u(""),r=u(""),p=u(!1),k=u(!0),x=u([{id:1,title:"静夜思",author:"李白",dynasty:"唐",content:"床前明月光，疑是地上霜。举头望明月，低头思故乡。"},{id:2,title:"春晓",author:"孟浩然",dynasty:"唐",content:"春眠不觉晓，处处闻啼鸟。夜来风雨声，花落知多少。"},{id:3,title:"登鹳雀楼",author:"王之涣",dynasty:"唐",content:"白日依山尽，黄河入海流。欲穷千里目，更上一层楼。"},{id:4,title:"相思",author:"王维",dynasty:"唐",content:"红豆生南国，春来发几枝。愿君多采撷，此物最相思。"},{id:5,title:"水调歌头",author:"苏轼",dynasty:"宋",content:"明月几时有？把酒问青天。不知天上宫阙，今夕是何年。"}]),S=q(()=>{let l=x.value;if(r.value&&(l=l.filter(t=>t.dynasty===r.value)),d.value){const t=d.value.toLowerCase();l=l.filter(i=>i.title.toLowerCase().includes(t)||i.author.toLowerCase().includes(t)||i.content.toLowerCase().includes(t))}return l}),F=()=>{console.log("搜索:",d.value)},P=()=>{console.log("筛选朝代:",r.value)},h=l=>m.favoritePoems.some(t=>t.id===l),L=l=>{h(l.id)?(m.removeFromFavorites(l.id),V.success("已取消收藏")):(m.addToFavorites(l),V.success("已添加到收藏"))},z=l=>{V.info(`分享《${l.title}》`)},B=async()=>{p.value=!0,setTimeout(()=>{p.value=!1,k.value=!1},1e3)};return Q(()=>{m.getPoems()}),(l,t)=>{const i=a("Search"),y=a("el-icon"),M=a("el-input"),g=a("el-col"),c=a("el-option"),N=a("el-select"),w=a("el-row"),E=a("el-tag"),T=a("Star"),C=a("el-button"),$=a("Share"),D=a("el-card");return f(),b("div",R,[n("div",W,[e(w,{gutter:20},{default:o(()=>[e(g,{xs:24,sm:16},{default:o(()=>[e(M,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),placeholder:"搜索诗词、作者或朝代...",size:"large",clearable:"",onInput:F},{prefix:o(()=>[e(y,null,{default:o(()=>[e(i)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(g,{xs:24,sm:8},{default:o(()=>[e(N,{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=s=>r.value=s),placeholder:"选择朝代",size:"large",clearable:"",onChange:P},{default:o(()=>[e(c,{label:"全部",value:""}),e(c,{label:"唐",value:"唐"}),e(c,{label:"宋",value:"宋"}),e(c,{label:"元",value:"元"}),e(c,{label:"明",value:"明"}),e(c,{label:"清",value:"清"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),n("div",X,[e(w,{gutter:20},{default:o(()=>[(f(!0),b(G,null,H(S.value,s=>(f(),J(g,{xs:24,md:12,key:s.id},{default:o(()=>[e(D,{class:"poem-card",shadow:"hover"},{default:o(()=>[n("div",Y,[n("h3",null,_(s.title),1),n("div",Z,[e(E,{size:"small"},{default:o(()=>[v(_(s.dynasty),1)]),_:2},1024),n("span",null,_(s.author),1)])]),n("div",ee,_(s.content),1),n("div",te,[e(C,{type:"text",onClick:I=>L(s),class:K({"is-favorite":h(s.id)})},{default:o(()=>[e(y,null,{default:o(()=>[e(T)]),_:1}),v(" "+_(h(s.id)?"已收藏":"收藏"),1)]),_:2},1032,["onClick","class"]),e(C,{type:"text",onClick:I=>z(s)},{default:o(()=>[e(y,null,{default:o(()=>[e($)]),_:1}),t[2]||(t[2]=v(" 分享 ",-1))]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),k.value?(f(),b("div",oe,[e(C,{onClick:B,loading:p.value},{default:o(()=>[...t[3]||(t[3]=[v(" 加载更多 ",-1)])]),_:1},8,["loading"])])):A("",!0)])}}}),ne=O(le,[["__scopeId","data-v-412b6f25"]]);export{ne as default};
